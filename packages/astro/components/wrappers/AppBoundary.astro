---
import Center from './Center.astro'
import Component from '../Component.astro'
import { getSizeValue, sizes, BaseTheme, CSSLength } from '../../index.ts'
import type { AppBoundaryProps, BoundarySize } from '../types.ts'

function getMaybeSize(theme: BaseTheme, boundarySize?: BoundarySize) {
    return typeof boundarySize === 'number' && boundarySize > 0
        ? `${boundarySize}px`
        : getSizeValue(theme, boundarySize) ?? (boundarySize as CSSLength | undefined)
}

const { boundarySize, theme = {}, ...props } = Astro.props as AppBoundaryProps

const maybeSize = getMaybeSize(theme, boundarySize)
---

<Component data-chisel-appboundary {theme} {...props}>
    <Center maxWidth={maybeSize ?? sizes['2xl']}>
        <slot />
    </Center>
</Component>

<style global>
    [data-chisel-appboundary] {
        padding: 0;
        max-inline-size: 100%;
        overflow-x: hidden;
        overflow-y: auto;
        height: 100%;
    }
</style>