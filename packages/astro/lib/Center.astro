---
import { getBreakpointValue, joinStyles } from '@chisel-ui/core'
import './Center.css'
import Component from './Component.astro'
import type { Breakpoint, Theme } from '@chisel-ui/core'
import type { Props as ComponentProps } from './Component.astro'

export interface Props<T extends Theme = Theme> extends ComponentProps<T> {
	inline?: boolean
	block?: boolean
	maxWidth?: Breakpoint<T['breakpoints']>
	centerText?: boolean
	centerContent?: boolean
}

const {
	theme = {},
	inline = true,
	block = false,
	maxWidth = '100%',
	centerText = false,
	centerContent = false,
	style = '',
	...props
} = Astro.props as Props

const safeMaxWidth = getBreakpointValue(theme, maxWidth)

const attrValue = [
	inline && 'inline',
	block && 'block',
	centerText && 'text',
	centerContent && 'content'
]
	.filter(Boolean)
	.join(' ')

const componentStyle = joinStyles(`--max-width: ${safeMaxWidth}`, style)
---

<Component
	data-chisel-center={attrValue}
	style={componentStyle}
	{theme}
	{...props}
>
	<slot />
</Component>
