---
import { getBreakpointValue, joinStyles } from '@chisel-ui/core'
import './Cover.css'
import Layout from './Layout.astro'
import type { Breakpoint, Theme } from '@chisel-ui/core'
import type { Props as LayoutProps } from './Layout.astro'

export interface Props<T extends Theme = Theme> extends LayoutProps<T> {
	minHeight?: Breakpoint<T['breakpoints']>
	stretchContent?: boolean
}

const { theme = {}, minHeight = 'fit-content', stretchContent = false, style = '', ...props } = Astro.props as Props

const safeMinHeight = getBreakpointValue(theme, minHeight)

const componentStyle = joinStyles(
    `--min-height: ${safeMinHeight}`,
    style
)
---

<Layout data-chisel-cover={stretchContent ? 'stretch' : ''} style={componentStyle} {theme} {...props}>
    {Astro.slots.top && (
        <div data-chisel-cover-top>
            <slot name="top" />
        </div>
    )}
    <div data-chisel-cover-centered>
        <slot />
    </div>
    {Astro.slots.bottom && (
        <div data-chisel-cover-bottom>
            <slot name="bottom" />
        </div>
    )}
</Layout>
