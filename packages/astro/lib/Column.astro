---
import { joinStyles } from '@chisel-ui/core'
import Component from './Component.astro'
import type { Theme } from '@chisel-ui/core'
import type { Props as LayoutProps } from './Layout.astro'

export interface Props<T extends Theme = Theme> extends LayoutProps<T> {
	span?: number
	offsetStart?: number
	offsetEnd?: number
}

function getSpan(span?: number) {
	return typeof span === 'number' && span >= 1 ? span : 1
}

function getOffset(offset?: number) {
	return offset > 0 ? offset : undefined
}

const {
	span,
	offsetStart,
	offsetEnd,
	style = '',
	...props
} = Astro.props as Props

const safeSpan = getSpan(span)
const safeOffsetStart = getOffset(offsetStart)
const safeOffsetEnd = getOffset(offsetEnd)

const componentStyle = joinStyles(
	`--span: ${safeSpan}`,
	safeOffsetStart && `--offset-start: ${safeOffsetStart}`,
	safeOffsetEnd && `--offset-end: ${safeOffsetEnd}`,
	style
)
---

<Component data-chisel-column style={componentStyle} {...props}>
	<slot />
</Component>

